<template name="chatFrame">
  <div class="chat-frame opened focusedTab">
    <div class="chat-view">
      <header>
        <div class="col-md-6 text-left partner-name">
          {{user.username}}
        </div>
        <div class="col-md-6 text-right menu">
          <a class="button chat-minimize fa fa-minus-circle" data-hover="tooltip" title="탭 최소화"></a>
          <a class="button chat-exit fa fa-times-circle" data-hover="tooltip" title="탭 닫기"></a>
        </div>
      </header>

      <main>
        {{#each chatMessagesList}}
          {{> chatMessageListItem}}
        {{/each}}

        {{#each chatStatusList}}
          {{> chatStatusListItem}}
        {{/each}}

      </main>
      <footer>
        <textarea class="chat-textarea"></textarea>
      </footer>
    </div>
  </div>
</template>

<template name="chatMessageListItem">
  {{#if isDate type}}
    <hr/>
      {{momentKoreanDate createdAt 5}}
    <hr/>
  {{else}}
    <div class="chat-message-list">
      {{#unless isFromMessage from._id}}
        <a href="#" class="avatar-sm">
          {{{getPicture from._id}}}
        </a>
        <div class="text-left chat-partner">
          {{content}}
        </div>
      {{else}}
        <div class="text-right chat-self">
          {{content}}
        </div>
      {{/unless}}
    </div>
  {{/if}}
</template>

<template name="chatStatusListItem">
  {{#unless isFromMessage from._id}}
    <div class="text-left chat-partner">
      입력중입니다......
    </div>
  {{/unless}}
</template>