<template name="home">
  <article class="page container-fluid shine-wrapper">
    {{#if noPosts}}
      <div class="row-fluid">
      {{#if Template.subscriptionsReady}}
        {{_ 'text_no_blogs'}}
      {{/if}}
      </div>
    {{else}}
      <div class="row-fluid">
        <nav class="navtabs">
          <ul class="navtabs-list">
            <li class="navtabs-item {{isActive ''}}">
              <a class="navtabs-anchor" href="{{pathFor 'home'}}">최신순</a>
            </li>
            <li class="navtabs-item {{isActive 'like'}}">
              <a class="navtabs-anchor" href="{{pathFor 'home' query='sortBy=like'}}">인기순</a>
            </li>
          </ul>
        </nav>
      </div>
      <div class="row-fluid">
        <div class="block-group">
          <ul class="block-list">
            {{#each posts}}
              {{#with postWithCategory}}
	              {{> homeListItem}}
              {{/with}}
            {{/each}}
          </ul>
        </div>
      </div>
      {{#if Template.subscriptionsReady}}
      <div class="row-fluid">
        {{#if hasMore}}
          <a class="btn btn-default btn-block load-more">더 보기</a>
        {{/if}}
      </div>
      {{else}}
      <div class="loading">{{> listLoading}}</div>
      {{/if}}
    {{/if}}
  </article>
</template>


<template name="homeListItem">
  <li class="post-item">
    <h3 class="title">
      <small><a href="{{pathFor 'categoryView' _id=categoryId}}">{{category.title}}</a></small>
      <a href="{{pathFor 'postView'}}">{{title}}</a>
    </h3>

    <p>
      {{{postContent}}}
    </p>

    <div class="info">
      <span class="author">
        <a href="{{pathFor 'accountView' username=author.username}}">{{author.username}}</a>
      </span>
      <span class="counts">
        <span class="count"><i class="fa fa-heart-o"></i> {{likesCount}}</span>
        <span class="count"><i class="fa fa-comment-o"></i> {{commentCount}}</span>
      </span>
      <span class="date">{{momentFromNow createdAt}}</span>
    </div>
  </li>
</template>
