<template name="postsList">
  <article class="page">
    <header>
      <h3>{{_ 'title_posts_list'}}</h3>
    </header>

    <div class="body">
      {{#if noPosts}}
        {{_ 'text_no_blogs'}}
      {{else}}
        <div class="row-fluid">
          Posts count: {{! postsCount --}} {{getPublishedCount 'postsListCount'}}
          <nav class="wrap-nav clearfix">
            <ul class="list-unstyled">
              <!-- Post Write Button -->
              {{#if currentUser}}
                <a class="btn btn-primary" href="{{pathFor 'postWrite'}}">{{_ 'command_register'}}</a>
              {{/if}}
            </ul>
          </nav>
        </div>

        <table class="table table-bordered table-striped">
          <thead>
          <tr>
            <th>{{_ 'label_title'}}</th>
            <th>{{_ 'label_author'}}</th>
            <th>{{_ 'label_createdAt'}}</th>
            <th></th>
          </tr>
          </thead>

          <tbody>
          {{#if Template.subscriptionsReady}}
            {{#each posts}}
              {{> postsListItem}}
            {{/each}}
          {{else}}
            {{> listLoading}}
          {{/if}}
          </tbody>
        </table>

        {{#if hasMore}}
          <button id="load-more" class="btn btn-default btn-block">{{_ 'command_load_more'}}</button>
        {{/if}}

      {{/if}}
    </div>
  </article>

</template>

<template name="postsListItem">
  <tr>
    <td><a href="{{pathFor 'postView'}}" class="title-link">{{title}}</a></td>
    <td><a href="">{{userDisplayName author._id}}</a></td>
    <td>{{momentFormat createdAt 'YYYY-MM-DD HH:mm'}}</td>
    <td>
      <div class="append-info">
        <span class="hit-count"><i class="fa fa-eye"></i> {{count.hits}}</span>
        <span class="comment-count"><i class="fa fa-heart-o"></i> {{count.likes}}</span>
        <span class="like-count"><i class="fa fa-comment-o"></i> {{count.comments}}</span>
      </div>
    </td>
  </tr>
</template>